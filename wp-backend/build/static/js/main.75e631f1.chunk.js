(this.webpackJsonpwpclone=this.webpackJsonpwpclone||[]).push([[0],{110:function(e,t,c){},111:function(e,t,c){},113:function(e,t,c){},117:function(e,t,c){},118:function(e,t,c){},119:function(e,t,c){"use strict";c.r(t);var a=c(4),n=c(2),s=c.n(n),i=c(30),r=c.n(i),j=c(50),o=c(17),l=c(36),b=c(10),d=c(33),u=c.n(d),h=c(45),O=c(137),m=c(134),p=c(48),x=c.n(p),f=c(135),v=c(70),g=c.n(v),w=c(71),N=c.n(w),S=c(73),y=c.n(S),C=c(72),k=c.n(C),D=(c(88),c(66)),I=c.n(D).a.create({baseURL:"http://localhost:9000"}),M=Object(n.createContext)(),E=function(e){var t=e.reducer,c=e.initialState,s=e.children;return Object(a.jsx)(M.Provider,{value:Object(n.useReducer)(t,c),children:s})},A=function(){return Object(n.useContext)(M)},R=function(e){var t=e.messages,c=Object(n.useState)(""),s=Object(o.a)(c,2),i=s[0],r=s[1],j=Object(b.f)().ROOMID,l=Object(n.useState)(""),d=Object(o.a)(l,2),p=d[0],v=d[1],w=A(),S=Object(o.a)(w,2),C=S[0].user;S[1];Object(n.useEffect)((function(){I.get("/rooms/".concat(j)).then((function(e){v(e.data)}))}),[j]);var D=function(){var e=Object(h.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!i){e.next=4;break}return e.next=4,I.post("/messages/new",{roomID:j,message:i,name:C.displayName,timeStamp:"".concat((new Date).getHours(),":").concat((new Date).getMinutes()),received:!1});case 4:r("");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsxs)("div",{className:"chat",children:[Object(a.jsxs)("div",{className:"chat-header",children:[Object(a.jsx)(O.a,{src:p.image}),Object(a.jsxs)("div",{className:"chat-header-info",children:[Object(a.jsx)("h3",{children:p.name}),Object(a.jsx)("p",{children:(new Date).toString()})]}),Object(a.jsxs)("div",{className:"chat-head-right",children:[Object(a.jsx)(m.a,{children:Object(a.jsx)(f.a,{})}),Object(a.jsx)(m.a,{children:Object(a.jsx)(g.a,{})}),Object(a.jsx)(m.a,{children:Object(a.jsx)(x.a,{})})]})]}),Object(a.jsx)("div",{className:"chat-body",children:t.map((function(e){return Object(a.jsx)("div",{children:e.roomID===j?Object(a.jsxs)("h6",{className:"chat-message ".concat(e.name===C.displayName&&"chat-reciever"),children:[Object(a.jsx)("p",{className:"chat-name",children:e.name}),e.message,Object(a.jsx)("span",{className:"chat-timestamp",children:e.timeStamp})]}):Object(a.jsx)("h1",{})})}))}),Object(a.jsxs)("div",{className:"chat-footer",children:[Object(a.jsx)(N.a,{}),Object(a.jsxs)("form",{children:[Object(a.jsx)("input",{placeholder:"Type message ..",type:"text",value:i,onChange:function(e){return r(e.target.value)}}),Object(a.jsx)("button",{onClick:D,type:"submit",children:Object(a.jsx)(k.a,{})})]}),Object(a.jsx)(y.a,{})]})]})},_=(c(110),c(74)),P=c.n(_),L=c(75),W=c.n(L),B=c(49),q=c.n(B),z=(c(111),function(e){var t=e.id,c=e.name,n=e.image;return Object(a.jsx)(l.b,{to:"/rooms/".concat(t),children:Object(a.jsxs)("div",{className:"sidebarChat",children:[Object(a.jsx)(O.a,{src:n}),Object(a.jsx)("div",{className:"sidebarChat-info",children:Object(a.jsx)("h2",{children:c})})]})})}),F=(c(112),function(e){var t=Object(n.useState)([]),c=Object(o.a)(t,2),i=c[0],r=c[1],l=A(),b=Object(o.a)(l,2),d=b[0].user,p=(b[1],s.a.useState("")),v=Object(o.a)(p,2),g=v[0],w=v[1],N=i.filter((function(e){return e.name.toLowerCase().includes(g.toLowerCase())}));Object(n.useEffect)((function(){I.get("/rooms/sync").then((function(e){r(e.data)}))}),[]),Object(n.useEffect)((function(){var e=new q.a("77bfb37eb1ed3c1f5728",{cluster:"eu"}).subscribe("rooms");return e.bind("inserted",(function(e){r([].concat(Object(j.a)(i),[e]))})),function(){e.unbind_all(),e.unsubscribe()}}),[i]);var S=Object(n.useState)(""),y=Object(o.a)(S,2),C=y[0],k=y[1];Object(n.useEffect)((function(){k(Math.floor(500*Math.random()))}),[]);var D=function(){var e=Object(h.a)(u.a.mark((function e(t){var c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!(c=prompt("Please enter toom name : "))){e.next=5;break}return e.next=5,I.post("/rooms/new",{name:c,image:"https://avatars.dicebear.com/4.5/api/male/".concat(C,".svg")});case 5:window.location.reload(!0);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsxs)("div",{className:"sidebar",children:[Object(a.jsxs)("div",{className:"sidebar-header",children:[Object(a.jsx)(O.a,{src:null===d||void 0===d?void 0:d.photoURL,className:"profilepic"}),Object(a.jsxs)("div",{className:"siebar-header-right",children:[Object(a.jsx)(m.a,{children:Object(a.jsx)(P.a,{})}),Object(a.jsx)(m.a,{onClick:D,children:Object(a.jsx)(W.a,{})}),Object(a.jsx)(m.a,{children:Object(a.jsx)(x.a,{})})]})]}),Object(a.jsx)("div",{className:"sidebar-search",children:Object(a.jsxs)("div",{className:"sidebar-searchContainer",children:[Object(a.jsx)(f.a,{}),Object(a.jsx)("input",{placeholder:"Search chat or start new",type:"text",onChange:function(e){return w(e.target.value)}})]})}),Object(a.jsx)("div",{className:"sidebar-chats",children:N.map((function(t){return Object(a.jsx)(z,{name:t.name,id:t._id,image:t.image,allMessages:e},t._id)}))})]})}),G=(c(113),c(76)),H=c(136),Q=c(51),U=(Q.a.initializeApp({apiKey:"AIzaSyBQoK0zSQi5F1lVL-cSqy5DA_or3VydcP4",authDomain:"whatsapp-mern-clone-156c3.firebaseapp.com",projectId:"whatsapp-mern-clone-156c3",storageBucket:"whatsapp-mern-clone-156c3.appspot.com",messagingSenderId:"981513484646",appId:"1:981513484646:web:f53fd0b2adebc63ed3f0a7"}),Q.a.auth()),V=new Q.a.auth.GoogleAuthProvider,J=(c(117),c(56)),K="SET_USER",T=function(e,t){switch(console.log(t),t.type){case K:return Object(J.a)(Object(J.a)({},e),{},{user:t.user});default:return e}},Z=function(){var e=A(),t=Object(o.a)(e,2);Object(G.a)(t[0]);var c=t[1];return Object(a.jsx)("div",{className:"login",children:Object(a.jsxs)("div",{className:"login-container",children:[Object(a.jsx)("img",{src:"https://cdn2.iconfinder.com/data/icons/social-messaging-ui-color-shapes-2-free/128/social-whatsapp-circle-512.png",alt:""}),Object(a.jsx)("div",{className:"login-text",children:"Sign in to WhatsApp Clone"}),Object(a.jsx)(H.a,{onClick:function(){U.signInWithPopup(V).then((function(e){c({type:K,user:e.user})})).catch((function(e){alert(e.message)}))},children:"Sign in with Google"})]})})},X=(c(118),function(){return Object(a.jsx)("div",{className:"welcome",children:Object(a.jsxs)("div",{className:"wc-container",children:[Object(a.jsx)("img",{src:"https://media-exp1.licdn.com/dms/image/C5603AQHvP34jkf8Mqw/profile-displayphoto-shrink_200_200/0/1601032304043?e=1614211200&v=beta&t=q13RFggXwpMDilABLHxDVs5IdZhM8ijWqNlZpl9wFug",alt:""}),Object(a.jsx)("h2",{children:"Welcome to WhatsApp Clone"}),Object(a.jsx)("p",{children:"Created with MERN stack"}),Object(a.jsx)("p",{children:" By Debjit Pramanick"}),Object(a.jsxs)("ul",{children:[Object(a.jsx)("li",{children:"Google Sign-in"}),Object(a.jsx)("li",{children:"Create room"}),Object(a.jsx)("li",{children:"Search rooms"}),Object(a.jsx)("li",{children:"Chat with people"})]})]})})}),Y=function(){var e=A(),t=Object(o.a)(e,2),c=t[0].user,s=(t[1],Object(n.useState)([])),i=Object(o.a)(s,2),r=i[0],d=i[1];return Object(n.useEffect)((function(){I.get("/messages/sync").then((function(e){d(e.data)}))}),[]),Object(n.useEffect)((function(){var e=new q.a("77bfb37eb1ed3c1f5728",{cluster:"eu"}).subscribe("messages");return e.bind("inserted",(function(e){d([].concat(Object(j.a)(r),[e]))})),function(){e.unbind_all(),e.unsubscribe()}}),[r]),console.log(window.innerWidth),Object(a.jsx)("div",{className:"app",children:c?Object(a.jsx)("div",{className:"app-body",children:Object(a.jsxs)(l.a,{children:[Object(a.jsx)(F,{messages:r}),Object(a.jsxs)(b.c,{children:[Object(a.jsx)(b.a,{path:"/rooms/:ROOMID",children:Object(a.jsx)(R,{messages:r})}),Object(a.jsx)(b.a,{path:"/",children:Object(a.jsx)(X,{})})]})]})}):Object(a.jsx)(Z,{})})};r.a.render(Object(a.jsx)(s.a.StrictMode,{children:Object(a.jsx)(E,{initialState:{user:null},reducer:T,children:Object(a.jsx)(Y,{})})}),document.getElementById("root"))},88:function(e,t,c){}},[[119,1,2]]]);
//# sourceMappingURL=main.75e631f1.chunk.js.map